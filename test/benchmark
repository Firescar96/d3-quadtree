#!/usr/bin/env node

var d3_array = require("d3-array"),
    d3_quadtree = require("../");

var points = d3_array.range(1000000)
    .map(function() { return {x: Math.random() * 100, y: Math.random() * 100}; });

var points2 = points
    .map(function(p) { return {x: p.x + Math.random() - 0.5, y: p.y + Math.random() - 0.5}; });

var start = now();
var root = d3_quadtree.quadtree();
for (var j = 0, n = points.length; j < n; ++j) root.add(points[j]);
var end = now();
console.log("create", Math.round(end - start));

var start = now();
root.eachBefore(function(node, x0, y0, x1, y1) {});
var end = now();
console.log("iterate", Math.round(end - start));

var start = now();
for (var j = 0, n = points.length; j < n; ++j) {
  root.remove(points[j]);
  root.add(points2[j]);
}
var end = now();
console.log("update", Math.round(end - start));

function now() {
  var now = process.hrtime();
  return now[0] * 1e3 + now[1] / 1e6;
}
